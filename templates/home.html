{% load static %}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>3 Realms-Home</title>
		<link rel="shortcut icon" type="image/png" href="{% get_media_prefix %}favicon.png" >
		<link
			rel="stylesheet"
			href="https://unpkg.com/swiper/swiper-bundle.min.css" />
		<style>
			/* Slideshow styles */
			.slideshow-container {
				max-width: 1920px;
				position: relative;
				margin: auto;
				overflow: hidden;
				height: 600px;
			}

			.slide {
				display: none;
				text-align: center;
				position: relative;
				height: 600px;
				background-size: cover;
				background-position: center;
			}

			.content {
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				color: white;
				text-align: center;
			}

			.content h2 {
				font-size: 24px;
				margin-bottom: 10px;
			}

			.content p {
				font-size: 16px;
				margin-bottom: 20px;
			}

			.button {
				display: inline-block;
				padding: 10px 20px;
				background-color: #df6d25;
				color: white;
				text-decoration: none;
				font-size: 16px;
				border: none;
				cursor: pointer;
			}

			.prev,
			.next {
				cursor: pointer;
				position: absolute;
				top: 50%;
				transform: translateY(-50%);
				padding: 16px;
				background-color: rgba(0, 0, 0, 0.5);
				color: white;
				font-weight: bold;
				font-size: 20px;
				transition: background-color 0.3s;
				z-index: 1;
			}

            .latest-movie-cont{
                padding:20px;
            }

            .latest-movie-cont h2{
                color:white;
                padding:20px;
                background:orange;
                width:max-content;
                border-radius:20px;
            }
			.prev {
				left: 10px;
			}

			.next {
				right: 10px;
			}

			/* lt-mv-item styles */
			body {
				font-family: Arial, sans-serif;
				margin: 0;
				padding: 0;
                background-color: #191717 !important;
				overflow-x: hidden !important;
			}

			

			.lt-mv-item {
				width: 23%;
				height: 400px;
				width:300px !important;
				margin-bottom: 20px !important;
				position: relative;
				overflow: hidden;
				cursor: pointer;
			}

			.lt-mv-item .overlay {
				opacity: 0;
			}

			.lt-mv-item .overlay:hover {
				opacity: 1;
				padding: 15px;
				background: rgba(0, 0, 0, 0.9);
				height: 400px;
				z-index: 1;
			}

			.swiper-container {
				width: 100%;
				padding: 20px;
			}

			.swiper-slide {
				font-size: 18px;
				background: #fff;
			}


			.lt-mv-item {
				height: 420px !important;
				width: 330px !important;
				margin:10px !important;
			}

			.lt-mv-item .overlay {
				height: 420px !important;
				width: 330px !important;
			}

			.lt-mv-item .overlay:hover {
				opacity: 1;
				padding: 15px;
				background: rgba(0, 0, 0, 0.9);
				height: 420px;
				z-index: 1;
			}

			.lt-mv-item .overlay h2 {
				margin-top: 20px;
				text-align: center;
                color: #ff9900;
				background-color:transparent !important;
			}

			.movie-item {
				border: 1px solid #ccc;
				padding: 30px 10px;
				margin-bottom: 20px;
				background-color: #fff;
			}

			.movie-item img {
				width: 100%;
				height: auto;
			}

			.modal {
				display: none;
				position: fixed;
				z-index: 9999;
				left: 0;
				top: 0;
				width: 60vw;
				height: 80vh;
				overflow: auto;
				background-color: rgba(0, 0, 0, 0.7);
			}

			.modal-content {
				background-color: #fefefe;
				margin: 10% auto;
				padding: 20px;
				border: 1px solid #888;
				width: 60vw !important;
                height: 70%  !important;
			}

            .modal-content iframe{
                width: calc(60vw - 40px) !important;
                height: 100%  !important;
            }

			.movie-item h2 {
				margin-top: 0;
				text-align: center !important;
				color:black !important;
				background: None;
			}

			.movie-item p {
				margin-bottom: 0;
				text-align: center;
				color:black !important;
			}

			@media(max-width: 768px) {
				.movies-container {
					display: block;
					overflow-x: auto;
					overflow-y: hidden;
				}
				.modal-content {
				background-color: #fefefe;
				margin: 10% auto;
				padding: 20px;
				border: 1px solid #888;
				width: 90vw !important;
                height: 40%  !important;
			}

            .modal-content iframe{
                width: calc(90vw - 40px) !important;
                height: 100%  !important;
            }

				.lt-mv-item {
					width:100vw;
				}
				
.latest-movie-cont h2 {
    color: white;
    padding: 10px;
    background: orange;
    width: max-content;
    border-radius: 20px;
    font-size: 20px;
}
				.section-head{
					font-size:20px;
					border-radius:10px !important;
					padding:10px !important;
					position:relative;
					left:50%;
					transform:translateX(-50%);
				}
				.slideshow-container{
					height:300px;
				}
				.slide {
				display: none;
				text-align: center;
				position: relative;
				height: 250px;
				background-size: cover;
				background-position: center;
			}

			.content {
				width:calc(100vw - 50px)
			}
			
			.swiper-wrapper{
				width:100% !important;
			}
			.movie-item h2 {
font-size:20px;
}

.swiper-slide h2{
	 background: transparent !important;
}
			}
		</style>
	</head>
	<body>
		{% include "header.html" with active_page="home" %}
		<div class="slideshow-container">
			<div
				class="slide slide1"
				style="
					background-image: url('{% get_media_prefix %}banners/banner1.jpg');
				">
				<div class="content">
					<h2>Experience the Magic of Indian Cinema</h2>
					<p>Bringing India's Finest Films to Europe!</p>
					<a href="{% url 'about' %}"class="button">Learn More</a>
				</div>
			</div>

			<div
				class="slide slide2"
				style="
					background-image: url('{% get_media_prefix %}banners/banner2.jpg');
				">
				<div class="content">
					<h2>Your Gateway to Indian Cinema</h2>
					<p>Personalized Distribution, Global Impact.</p>
					<a href="{% url 'about' %}"class="button">Discover More</a>
				</div>
			</div>

			<div
				class="slide slide3"
				style="
					background-image: url('{% get_media_prefix %}banners/banner3.jpg');
				">
				<div class="content">
					<h2>Unlock the Power of Storytelling</h2>
					<p>Transforming Lives, One Film at a Time.</p>
					 <a href="{% url 'about' %}"class="button">Explore More</a>
				</div>
			</div>

			<a class="prev" onclick="changeSlide(-1)">&#10094;</a>
			<a class="next" onclick="changeSlide(1)">&#10095;</a>
		</div>
        
        <div class="latest-movie-cont">
            <h2 class="section-head">Latest Movies</h2>
            <div class="movies-container swiper-container">
                
                <div class="swiper-wrapper">

                    {% for movie in movies %}
                    <div>
                <div
				 class="swiper-slide lt-mv-item"
					style="
					background-image: url('{{movie.image.url}}');
                    background-size:cover;
                    background-repeat:no-repeat;
				">
					<div class="overlay">
						<h2>{{ movie.title }}</h2>
						<p>{{ movie.description }}</p>
						<a
							href="#"
							class="button"
							onclick="openModal('{{ movie.trailer_link }}')"
							>Watch Now</a
						>
						
						<a href="{% url 'movie_synopsis' movie.id %}" class="button">Book Now</a>
					</div>
				</div>
			</div>
                    {% endfor %}
                </div>
            </div>
    	</div>
		<div id="myModal" class="modal">
			<div class="modal-content">
				<span class="close" onclick="closeModal()">&times;</span>
				<iframe
					id="videoPlayer"
					
					src=""
					frameborder="0"
					allowfullscreen></iframe>
			</div>
		</div>
        <div class="counter">{% include "counter.html" %}</div>
        <div class="latest-movie-cont">
            <h2 class="section-head">Upcoming Movies</h2>
            <div class="movies-container swiper-container">
                
                <div class="swiper-wrapper">
					{% for movie in upmovies %}
							<div class="swiper-slide movie-item">
								<center><h2>{{movie.title}}</h2></center>
								<img src="{{ movie.image.url }}" alt="{{ movie.title }}" />
								<p>{{ movie.release_date|default:'-' }}</p>
							</div>
					{% endfor %}

					
                </div>

            </div>
    	</div>
		
    	<div class="footer">{% include "footer.html" %}</div>
    </div>

		<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
		<script>
			let slideIndex = 1;
			showSlide(slideIndex);

			function changeSlide(n) {
				showSlide((slideIndex += n));
			}

			function currentSlide(n) {
				showSlide((slideIndex = n));
			}

			function showSlide(n) {
				let slides = document.getElementsByClassName("slide");
				if (n > slides.length) {
					slideIndex = 1;
				}
				if (n < 1) {
					slideIndex = slides.length;
				}
				for (let i = 0; i < slides.length; i++) {
					slides[i].style.display = "none";
				}
				slides[slideIndex - 1].style.display = "block";
			}

			if (window.outerWidth >= 768) {
				var swiper = new Swiper(".swiper-container", {
				slidesPerView: 4,
				spaceBetween: 20,
				loop: true,
				autoplay: {
					delay: 1500,
					disableOnInteraction: false,
				},
			});
			}
			else{
				var swiper = new Swiper(".swiper-container", {
				slidesPerView: 1,
				spaceBetween: 20,
				loop: true,
				autoplay: {
					delay: 1500,
					disableOnInteraction: false,
				},
			});
			}
function openModal(videoUrl) {
				var modal = document.getElementById("myModal");
				var videoPlayer = document.getElementById("videoPlayer");
				videoPlayer.src = videoUrl;
				modal.style.display = "block";
			}

			function closeModal() {
				var modal = document.getElementById("myModal");
				var videoPlayer = document.getElementById("videoPlayer");
				videoPlayer.src = "";
				modal.style.display = "none";
			}

		</script>
	</body>
</html>
